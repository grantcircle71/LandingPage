<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Circle71 - Refined Performance</title>
  <style>
    /* General Styles */
    :root {
      /* Color variables (centralized) */
      --color-dark: #222F4E;
      --color-cream: #F5F2EB;
      --color-white: #ffffff;
      --color-muted: #fafafa;
      --color-subtle: #999999;
      --color-error: #ff6b6b;
      --color-footer: #366E4E;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', 'Helvetica Neue', Helvetica, Arial, sans-serif;
      color: var(--color-dark);
      overflow-x: hidden;
      background: var(--color-cream);
    }
    /* Hero Section */
    .hero {
      height: 100vh;
      position: relative;
      display: flex;
      align-items: center;
      justify-content: center;
      /* Use hero_background.png as background image, cover and crop responsively.
         Anchor to the left so the left side of the image is always exposed while
         cropping happens on the right as the viewport gets smaller. */
      background: var(--color-dark) url('hero_background.png') left center / cover no-repeat;
      overflow: hidden;
    }

    /* Ensure hero tagline is centered and constrained for better line-wrapping */
    .hero .tagline {
      text-align: center;
      max-width: 900px;
      margin: 0 auto 20px;
      display: block;
      line-height: 1.4;
      font-family: 'Urbanist', sans-serif;
    }

    .hero-content {
      text-align: center;
      z-index: 5; /* Content must be on top of the SVG */
      max-width: 900px;
      padding: 0 40px;
      animation: fadeInUp 1.4s ease-out;
    }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(40px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .logo-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin-bottom: 30px;
    }

    .logo-mark {
      width: 120px;
      height: 120px;
      margin-bottom: 25px;
      position: relative;
    }

    .logo-mark img {
      width: 100%;
      height: 100%;
      object-fit: contain;
    }

    .logo {
      font-size: 4.5rem;
      font-weight: 500;
      letter-spacing: 12px;
      /* Logo color remains light for contrast on dark blue */
      color: var(--color-cream); 
    }

    .tagline {
      font-size: 1.8rem;
      color: var(--color-cream);
      font-weight: 300;
      letter-spacing: 3px;
      margin-bottom: 20px;
      line-height: 1.5;
    }

    .subtext {
      font-size: 1rem;
      /* UPDATED: Changed from semi-transparent to solid cream */
      color: var(--color-cream);
      font-weight: 400;
      letter-spacing: 1px;
      margin-bottom: 20px;
      line-height: 1.8;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
    }

    /* Brand Statement */
    .brand-statement {
      padding: 120px 40px;
      background: var(--color-cream);
      text-align: center;
    }

    .statement-container {
      max-width: 800px;
      margin: 0 auto;
    }

    .statement-text {
      font-size: 1.3rem;
      line-height: 2;
      font-weight: 300;
      color: var(--color-dark);
      letter-spacing: 0.5px;
    }

    /* --- SVG Line Styles --- */

    /* Product Showcase */
    .products {
      padding: 100px 40px 120px;
      background: var(--color-white);
    }

    .products-container {
      max-width: 1200px;
      margin: 0 auto;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(450px, 1fr));
      gap: 80px;
    }

    /* Adjusted product-card for simplified, text-only view */
    .product-card {
      text-align: center;
      padding: 40px 40px 30px; 
      background: var(--color-muted);
      transition: all 0.4s ease;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
    }

    .product-name {
      font-size: 1.8rem;
      font-weight: 300;
      letter-spacing: 4px;
      color: var(--color-dark);
      margin-bottom: 15px;
    }

    .product-tagline {
      font-size: 0.85rem;
      color: var(--color-subtle);
      letter-spacing: 2px;
      margin-bottom: 0;
      font-weight: 400;
      text-transform: uppercase;
    }

    /* Email Form Styles - Adapted for Hero Section */

    .hero-email-wrapper {
      margin-top: 30px;
      color: var(--color-cream);
    }

    .email-form {
      display: flex;
      gap: 15px;
      max-width: 550px;
      margin: 0 auto;
      flex-wrap: wrap;
      justify-content: center;
    }

    .email-input {
      flex: 1;
      min-width: 280px;
      padding: 18px 24px;
      /* UPDATED: Border color now matches the submit button */
      border: 1px solid var(--color-cream);
      background: transparent;
      color: var(--color-cream);
      font-size: 0.95rem;
      font-weight: 300;
      letter-spacing: 1px;
      transition: all 0.3s ease;
      border-radius: 4px;
    }

    .submit-btn {
      padding: 18px 40px;
      background: transparent;
      color: var(--color-cream);
      border: 1px solid var(--color-cream);
      font-size: 0.85rem;
      font-weight: 400;
      letter-spacing: 2px;
      cursor: pointer;
      transition: all 0.3s ease;
      text-transform: uppercase;
      border-radius: 4px;
    }

    .submit-btn:hover {
      background: var(--color-cream);
      color: var(--color-dark);
    }

    .success-message, .error-message {
      display: none;
      color: var(--color-cream);
      margin-top: 25px;
      font-size: 1rem;
      letter-spacing: 1px;
      animation: fadeInUp 0.5s ease-out;
    }

    .error-message {
       color: var(--color-error);
    }

    /* Footer */
    footer {
      background: var(--color-footer);
      padding: 80px 40px 50px;
      color: var(--color-cream);
    }

    .footer-container {
      max-width: 1200px;
      margin: 0 auto;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 30px;
    }
    
    /* NEW STYLES: Social Link Alignment */
    .social-links {
      display: flex;
      gap: 20px;
      margin-top: 10px;
    }

    .social-link {
      display: block;
      width: 24px;
      height: 24px;
      color: var(--color-cream);
      opacity: 0.7;
      transition: opacity 0.3s ease, transform 0.3s ease;
    }

    .social-link:hover {
      opacity: 1;
      transform: scale(1.1);
    }

    .social-link svg {
      width: 100%;
      height: 100%;
      fill: currentColor;
    }
    /* END NEW STYLES */

    .footer-logo {
      margin-bottom: 0px; /* change this value to increase/decrease spacing */
    }
    
    /* NEW: Image styling for the footer logo */
    .footer-logo img {
      height: 100px; /* Adjust size for footer */
      width: auto;
      opacity: 0.7; /* Faded effect to match original text style */
      transition: opacity 0.3s ease;
    }

    .footer-logo img:hover {
      opacity: 1;
    }

    /* MOBILE/TABLET STYLES: Forces stacking on narrower screens */
    @media (max-width: 968px) {
      .products-container {
        grid-template-columns: 1fr;
        gap: 60px;
      }
    }

    @media (max-width: 768px) {
      .logo {
        font-size: 3rem;
        letter-spacing: 8px;
      }

      .logo-mark {
        width: 90px;
        height: 90px;
        margin-bottom: 20px;
      }

      .tagline {
        font-size: 1.3rem;
        letter-spacing: 2px;
      }

      .email-form {
        flex-direction: column;
      }
    }

    /* Clean footer spacing variables & styles */
    :root {
      --footer-padding-top: 32px;
      --footer-padding-bottom: 32px;
      --footer-gap: 18px;
      --footer-logo-height: 72px;
      --footer-logo-gap: 8px;
      --tagline-social-gap: 14px;
      --social-copyright-gap: 14px;
      --social-icon-size: 24px;
      --footer-max-width: 1200px;
    }

    footer {
      background: var(--color-footer);
      color: var(--color-cream);
      padding: var(--footer-padding-top) 40px var(--footer-padding-bottom);
    }

    .footer-container {
      max-width: var(--footer-max-width);
      margin: 0 auto;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: var(--footer-gap);
      text-align: center;
    }

    .footer-logo img {
      height: var(--footer-logo-height);
      width: auto;
      opacity: 0.9;
      transition: opacity 0.2s ease;
    }
    .footer-logo img:hover { opacity: 1; }

    .footer-tagline {
      margin: 0;
      margin-top: var(--footer-logo-gap);
      margin-bottom: var(--tagline-social-gap);
      font-family: 'Fahkwang','TS Maka Regular', Optima, 'Inter', sans-serif;
      color: var(--color-cream);
      letter-spacing: 1px;
    }

    .social-links {
      display: flex;
      gap: 18px;
      align-items: center;
      justify-content: center;
      margin: 0;
    }

    .social-link {
      display: inline-block;
      width: var(--social-icon-size);
      height: var(--social-icon-size);
      color: var(--color-cream);
      opacity: 0.85;
      transition: opacity 0.22s ease, transform 0.18s ease;
    }
    .social-link:hover { opacity: 1; transform: translateY(-2px); }

    .social-link svg { width: 100%; height: 100%; fill: currentColor; }

    .copyright {
      margin: 0;
      margin-top: var(--social-copyright-gap);
      font-size: 0.85rem;
      color: var(--color-cream);
    }

    @media (max-width: 480px) {
      :root { --footer-logo-height: 56px; --social-icon-size: 20px; --footer-gap: 14px; }
      .footer-container { padding-left: 20px; padding-right: 20px; }
    }

    .scroll-indicator {
      position: absolute;
      bottom: 30px; /* distance from bottom of hero */
      left: 50%;
      transform: translateX(-50%);
      font-size: 2rem;
      color: var(--color-cream);
      opacity: 0.7;
      animation: bounce 2s infinite;
    }

    @keyframes bounce {
      0%, 20%, 50%, 80%, 100% { transform: translateX(-50%) translateY(0); }
      40% { transform: translateX(-50%) translateY(8px); }
      60% { transform: translateX(-50%) translateY(4px); }
    }

    
  </style>
</head>
<body>
  <section class="hero">
  <div class="hero-content">
    <div class="logo-container">
    <div class="logo-mark">
      <img 
      src="logo.png" 
      alt="Circle 71 Logo Mark"
      style="position:absolute; top:30%; left:50%; transform:translate(-50%,-50%); width:35vw; height:auto; max-width:420px; min-width:90px; display:block;"
      onerror="this.src='https://placehold.co/120x120/212C65/F5F2EB?text=71&font=helvetica';"
      />
    </div>
    <h1 class="logo" 
      id="circle71Logo"
      style="font-family: 'Fahkwang', 'TS Maka Regular', Optima, 'Inter', 'Helvetica Neue', Helvetica, Arial, sans-serif;">
      CIRCLE 71
    </h1>
    </div>
    <p class="tagline" style="font-size: 1.62rem;">Born in Jackson Hole, refined performance apparel — for those who never lay-up.</p>
    <div class="hero-email-wrapper">
    <form class="email-form" id="emailForm">
      <input 
      type="email" 
      class="email-input" 
      placeholder="Your email address" 
      required
      id="emailInput"
      >
      <button type="submit" class="submit-btn">Join the Circle</button>
    </form>
    <div class="success-message" id="successMessage">
      Welcome to the Circle!. You're on the list 
    </div>
    <div class="error-message" id="errorMessage">
      An error occurred. Please try again.
    </div>
    </div>
  </div>
  <script>
  // Ensure spacing between logo-mark and logo text is always the height of the logo text box
  window.addEventListener('DOMContentLoaded', function() {
    var logo = document.getElementById('circle71Logo');
    if (logo) {
    var logoHeight = logo.offsetHeight;
    logo.style.marginTop = logoHeight + 'px';
    }
  });
  </script>
  <div class="scroll-indicator">
    <span>⌄</span> <!-- or your SVG chevron / arrow -->
  </div>
  </section>

  <section class="brand-statement">
  <div class="statement-container">
  <p class="statement-text">Circle 71 believes true performance is quiet, intentional, and enduring. Each design will reflect the precision of modern engineering and the timeless balance of form and function. Our first collection reimagines the essentials of the modern game, crafted to perform and last.</p>
  </div>
  </section>

  <section class="founders-section">
  <div class="founders-container">
    <div class="founders-content">
      <img src="founders.png" alt="Drew and Grant Smith - Circle 71 Founders" class="founders-float-img" />
      <h2 class="founders-title">OUR STORY</h2>
      <p class="founders-text">
        Drew and Grant Smith, a father and son united by design, discipline, and the love of the game.
      </p>
      <p class="founders-text">
        Golf began for Drew as an island pastime. He had recently sold InfoArmor, the cybersecurity company he founded,
        to Allstate for over $500 million. Not long after, he and his wife settled in Hawaii during the pandemic.
        A casual round at their club soon turned into an obsession. The game became more than a sport: it was connection,
        competition, and the joy of being outside. As he says, “Mark Twain may have called it a good walk spoiled,
        but I can’t get enough.”
      </p>
      <p class="founders-text">
        Grant Smith took a different path through the mountains, not the fairway. A mechanical engineer designing
        body structures for Rivian, he’s an adventurer at heart: runner, climber, explorer of the Tetons. Curious yet
        methodical, Grant brings the same precision from the backcountry to his engineering and product design,
        where every detail matters.
      </p>
      <p class="founders-text">
        Together, they founded Circle 71, born from a shared drive to build with purpose and perform with precision.
      </p>
      <p class="founders-text">
        Drew channels decades of entrepreneurial leadership and creativity into leading design and assembling a
        world-class team. After growing InfoArmor into an industry leader serving millions, he finds deep satisfaction
        in creating tangible products built to last.
      </p>
      <p class="founders-text">
        Grant applies his engineering discipline to material testing and product manufacturing, challenging assumptions,
        minimizing waste, and creating apparel that looks refined, feels exceptional, and performs with purpose.
      </p>
      <p class="founders-text">
        Circle 71 is where father and son meet at the intersection of craftsmanship and innovation.
      </p>
    </div>
  </div>
</section>

<style>
  .founders-section {
    background: var(--color-white);
    padding: 120px 40px;
  }

  .founders-container {
    max-width: 900px;
    margin: 0 auto;
  }

  .founders-content {
    font-family: 'Inter', 'Helvetica Neue', Helvetica, Arial, sans-serif;
    color: var(--color-dark);
  }

  .founders-float-img {
    float: left;
    width: 45%;
    max-width: 420px;
    margin: 0 40px 20px 0;
    border-radius: 8px;
    box-shadow: 0 4px 18px rgba(0, 0, 0, 0.08);
    object-fit: cover;
  }

  .founders-title {
    font-size: 2rem;
    letter-spacing: 4px;
    font-weight: 400;
    margin-bottom: 25px;
    text-transform: uppercase;
  }

  .founders-text {
    font-size: 1.1rem;
    line-height: 1.9;
    font-weight: 300;
    margin-bottom: 20px;
    letter-spacing: 0.3px;
  }

  @media (max-width: 768px) {
    .founders-float-img {
      float: none;
      display: block;
      width: 100%;
      margin: 0 auto 40px auto;
    }

    .founders-section {
      padding: 80px 24px;
    }

    .founders-title {
      font-size: 1.6rem;
      letter-spacing: 3px;
      text-align: center;
    }

    .founders-text {
      font-size: 1rem;
      text-align: left;
    }
  }
</style>



  <footer>
    <style>
      /* Clean footer spacing variables & styles */
      :root {
        --footer-padding-top: 32px;
        --footer-padding-bottom: 32px;
        --footer-gap: 18px;
        --footer-logo-height: 72px;
        --footer-logo-gap: 0px;
        --tagline-social-gap: 14px;
        --social-copyright-gap: 14px;
        --social-icon-size: 24px;
        --footer-max-width: 1200px;
      }

      footer {
        background: var(--color-footer);
        color: var(--color-cream);
        padding: var(--footer-padding-top) 40px var(--footer-padding-bottom);
      }

      .footer-container {
        max-width: var(--footer-max-width);
        margin: 0 auto;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: var(--footer-gap);
        text-align: center;
      }

      .footer-logo img {
        height: var(--footer-logo-height);
        width: auto;
        opacity: 0.9;
        transition: opacity 0.2s ease;
      }
      .footer-logo img:hover { opacity: 1; }

      .footer-tagline {
        margin: 0;
        margin-top: var(--footer-logo-gap);
        margin-bottom: var(--tagline-social-gap);
        font-family: 'Fahkwang','TS Maka Regular', Optima, 'Inter', sans-serif;
        color: var(--color-cream);
        letter-spacing: 1px;
      }

      .social-links {
        display: flex;
        gap: 18px;
        align-items: center;
        justify-content: center;
        margin: 0;
      }

      .social-link {
        display: inline-block;
        width: var(--social-icon-size);
        height: var(--social-icon-size);
        color: var(--color-cream);
        opacity: 0.85;
        transition: opacity 0.22s ease, transform 0.18s ease;
      }
      .social-link:hover { opacity: 1; transform: translateY(-2px); }

      .social-link svg { width: 100%; height: 100%; fill: currentColor; }

      .copyright {
        margin: 0;
        margin-top: var(--social-copyright-gap);
        font-size: 0.85rem;
        color: var(--color-cream);
      }

      @media (max-width: 480px) {
        :root { --footer-logo-height: 56px; --social-icon-size: 20px; --footer-gap: 14px; }
        .footer-container { padding-left: 20px; padding-right: 20px; }
      }
    </style>

    <div class="footer-container">
      <div class="footer-logo">
        <img
          src="Circle71_Logo_Horizontal_Cream.png"
          alt="Circle 71 Logo"
          onerror="this.src='https://placehold.co/200x50/1a1a1a/F5F2EB?text=CIRCLE71&font=helvetica';"
        >
      </div>

      <p class="footer-tagline">Play Pure. Never Lay Up.</p>

      <div class="social-links" aria-label="social links">
        <a href="https://www.tiktok.com/@Circle71usa" target="_blank" rel="noopener noreferrer" class="social-link" aria-label="TikTok">
          <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="true" fill="currentColor">
            <path d="M19.59 6.69a4.83 4.83 0 0 1-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 0 1-5.2 1.74 2.89 2.89 0 0 1 2.31-4.64 2.93 2.93 0 0 1 .88.13V9.4a6.84 6.84 0 0 0-1-.05A6.33 6.33 0 0 0 5 20.1a6.34 6.34 0 0 0 10.86-4.43v-7a8.16 8.16 0 0 0 4.77 1.52v-3.4a4.85 4.85 0 0 1-1-.1z"/>
          </svg>
        </a>
        <!--

        <a href="https://twitter.com/circle71usa" target="_blank" rel="noopener noreferrer" class="social-link" aria-label="X (Twitter)">
          <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="true" fill="currentColor">
            <path d="M22.46 6c-.77.34-1.6.57-2.46.67a4.29 4.29 0 0 0 1.88-2.37 8.59 8.59 0 0 1-2.72 1.04 4.28 4.28 0 0 0-7.3 3.9A12.14 12.14 0 0 1 3.15 4.6a4.28 4.28 0 0 0 1.33 5.72 4.22 4.22 0 0 1-1.94-.54v.05a4.28 4.28 0 0 0 3.43 4.19 4.3 4.3 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98A8.59 8.59 0 0 1 2 19.54a12.12 12.12 0 0 0 6.57 1.93c7.89 0 12.21-6.54 12.21-12.21v-.56A8.7 8.7 0 0 0 22.46 6z"/>
          </svg>
        </a>
        
        <a href="https://www.youtube.com/@circle71usa" target="_blank" rel="noopener noreferrer" class="social-link" aria-label="YouTube">
          <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="true" fill="currentColor">
            <path d="M23.5 6.18a3.01 3.01 0 0 0-2.12-2.14C19.51 3.55 12 3.55 12 3.55s-7.51 0-9.38.49A3.02 3.02 0 0 0 .5 6.18C0 8.07 0 12 0 12s0 3.93.5 5.82a3.02 3.02 0 0 0 2.12 2.14c1.87.51 9.38.51 9.38.51s7.51 0 9.38-.51a3.02 3.02 0 0 0 2.12-2.14C24 15.93 24 12 24 12s0-3.93-.5-5.82zM9.55 15.57V8.43L15.82 12l-6.27 3.57z"/>
          </svg>
        </a>
        -->
        <a href="https://www.instagram.com/circle71usa" target="_blank" rel="noopener noreferrer" class="social-link" aria-label="Instagram">
          <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="true" fill="currentColor">
            <path d="M12 2.16c3.2 0 3.58.01 4.84.07 3.25.15 4.77 1.69 4.92 4.92.06 1.26.07 1.64.07 4.85s-.01 3.59-.07 4.85c-.15 3.23-1.67 4.77-4.92 4.92-1.26.06-1.64.07-4.84.07s-3.58-.01-4.84-.07c-3.25-.15-4.77-1.69-4.92-4.92C2.12 15.59 2.1 15.21 2.1 12s.02-3.59.07-4.85C2.32 3.92 3.84 2.37 7.09 2.22 8.35 2.16 8.73 2.16 12 2.16zm0-2.16C8.74 0 8.32.01 7.04.07 2.68.27.25 2.69.06 7.05.01 8.32 0 8.74 0 12s.01 3.68.07 4.95c.2 4.36 2.62 6.78 6.98 6.98C8.32 23.99 8.74 24 12 24s3.68-.01 4.95-.07c4.36-.2 6.78-2.62 6.98-6.98.06-1.27.07-1.69.07-4.95s-.01-3.68-.07-4.95C23.73 2.69 21.31.27 16.95.07 15.68.01 15.26 0 12 0zM12 5.84a6.16 6.16 0 1 0 0 12.32A6.16 6.16 0 0 0 12 5.84zm0 10.16a3.99 3.99 0 1 1 0-7.98 3.99 3.99 0 0 1 0 7.98zm6.41-11.84a1.44 1.44 0 1 1 0 2.88 1.44 1.44 0 0 1 0-2.88z"/>
          </svg>
        </a>
      </div>

      <p class="copyright">© 2025 CIRCLE 71™ LLC. All rights reserved.</p>
    </div>
  </footer>

  <script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
  import { getAuth, signInWithCustomToken, signInAnonymously } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
  import { getFirestore, collection, addDoc, setLogLevel } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

  // --- FIREBASE INITIALIZATION AND AUTHENTICATION ---
  const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-circle71-app-id';
  const firebaseConfig = {
    apiKey: "AIzaSyAyRDFas9B8YLAx2XawHWHZvgf2oSezGIA",
    authDomain: "circle71-3855a.firebaseapp.com",
    projectId: "circle71-3855a",
    storageBucket: "circle71-3855a.firebasestorage.app",
    messagingSenderId: "701220808447",
    appId: "1:701220808447:web:ea7e03d13edbc19cee8eca",
    measurementId: "G-2FXN8GF6JZ"
  };
  const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;

  let db;
  let auth;
  let userId = null;
  let isAuthReady = false;
  
  // Log level for debugging Firestore operations
  setLogLevel('Debug'); 

  // Async setup function
  const setupFirebase = async () => {
    try {
    const app = initializeApp(firebaseConfig);
    auth = getAuth(app);
    db = getFirestore(app);

    if (initialAuthToken) {
      await signInWithCustomToken(auth, initialAuthToken);
    } else {
      await signInAnonymously(auth);
    }
    
    userId = auth.currentUser?.uid;
    isAuthReady = true;
    console.log('Firebase initialized. User ID:', userId);

    } catch (error) {
    console.error("Error setting up Firebase or authentication:", error);
    // If authentication fails, use a fallback ID but data won't persist to Firestore
    userId = crypto.randomUUID();
    isAuthReady = true; 
    }
  };

  // Run setup immediately
  setupFirebase();


  // --- FORM HANDLING LOGIC ---
  const form = document.getElementById('emailForm');
  const emailInput = document.getElementById('emailInput');
  const successMessage = document.getElementById('successMessage');
  const errorMessage = document.getElementById('errorMessage');

  form.addEventListener('submit', async (e) => {
    e.preventDefault();
    
    // Hide previous messages
    successMessage.style.display = 'none';
    errorMessage.style.display = 'none';

    if (!isAuthReady || !db) {
    console.error("Firebase is not ready. Cannot submit data.");
    errorMessage.textContent = "Database service temporarily unavailable.";
    errorMessage.style.display = 'block';
    return;
    }

    const email = emailInput.value;
    // Note: The userId might be the signed-in user's UID or a randomly generated UUID if anonymous sign-in failed.
    const currentUserId = auth.currentUser?.uid || userId;
    const SUB_COLLECTION_PATH = 'emails';


    try {
    // Prepare the document data
    const subscriptionData = {
      email: email,
      timestamp: new Date().toISOString(),
      source: 'Circle71 Hero Section'
    };

    // Add document to Firestore
    const docRef = await addDoc(collection(db, SUB_COLLECTION_PATH), subscriptionData);

    // Replace the form with the success message (show submitted email)
    successMessage.textContent = `Welcome to Circle 71. Your access has been reserved — ${email}`;
    form.replaceWith(successMessage);
    successMessage.style.display = 'block';

    console.log('Email successfully subscribed and saved to Firestore. Document ID:', docRef.id);
    console.log('Saved to path:', SUB_COLLECTION_PATH);
    
    } catch (error) {
    console.error("Error writing document to Firestore:", error);
    errorMessage.textContent = "Subscription failed due to a server error. Please try again.";
    errorMessage.style.display = 'block';
    }
  });
  </script>
</body>
</html>